<template name="listing">
    <div class="container" id="wrap">
        {{#if Template.subscriptionsReady}}
            {{#with listing}}
                <div class=" card-panel animated fadeIn">
                    <div class="row">
                        {{#if pictureIds}}
                            {{> photoCarousel}}
                        {{/if}}
                        <div class="col {{#if pictureIds}}m6{{else}}m12{{/if}} s12">
                            {{#if isOwner owner}}
                                <button id="remove-listing" class="btn-flat waves-effect waves-light waves-red darken-4 right">
                                    <i class="material-icons">clear</i>
                                </button>
                            {{/if}}
                            <h5>{{title}}</h5>
                            <p>{{category}}</p>
                            <p>${{price}}</p>
                            <div class="section">
                                <label>Description</label>
                                <p>{{description}}</p>
                            </div>

                            <div class="section">
                                <div class="divider"></div>
                                {{#if phone}}
                                    <p>Phone: {{phone}}</p>
                                {{/if}}
                                {{#if email}}
                                    <p>Email: {{email}}</p>
                                {{/if}}
                            </div>
                        </div>
                    </div>
                </div>
            {{/with}}
        {{else}}
            {{> spinner}}
        {{/if}}
    </div>

    {{> removeListingModal}}
</template>

<template name="photoCarousel">
    <div id="photo-carousel" class="col m6 s12">
        {{#each pictureIds}}
            <a data-lightbox="photos" href="{{picture this}}">
                <img class="listing-photo" src="{{picture this}}" alt="{{picture.name}}">
            </a>
        {{/each}}
    </div>
</template>